{"version":3,"sources":["webpack://mfModules.[name]/./src/mobile.editor.ve/mobile.editor.ve.js","webpack://mfModules.[name]/./src/mobile.editor.ve/schemaVisualEditorFeatureUse.js","webpack://mfModules.[name]/./src/mobile.editor.ve/ve.init.mw.MobileFrontendArticleTarget.js"],"names":["MobileFrontendArticleTarget","require","schemaVisualEditorFeatureUse","ve","init","mw","targetFactory","register","trackSubscribe","topic","data","track","extendObject","feature","split","editing_session_id","target","overlay","sessionId","module","exports","trackdebug","util","getParamValue","loader","getState","using","then","Schema","eventLog","sampleRate","config","get","event","action","editingSessionId","console","log","apply","arguments","MobileArticleTarget","parseSaveError","Target","this","$overlay","$el","$overlaySurface","find","useScrollContainer","platform","constructor","static","isIos","super","call","onWindowScrollDebounced","debounce","onWindowScroll","bind","$","getElementWindow","on","$element","addClass","OO","inheritClass","prototype","destroy","off","css","getScrollContainer","isToolbarOverSurface","onContainerScroll","$window","windowTop","contentTop","surfaceView","surface","getView","isFocused","deactivated","scrollTop","$scrollContainer","scrollTo","scrollCursorIntoView","getSurface","onSurfaceScroll","nativeSelection","range","rangeCount","document","activeElement","contentEditable","getRangeAt","removeAllRanges","addRange","createSurface","dmDoc","isNewPage","placeholder","msg","user","connect","scroll","setSurface","changed","append","surfaceReady","hideSpinner","removeClass","getContext","resize","adjustContentPadding","maybeShowWelcomeDialog","toolbarHeight","getToolbar","outerHeight","setToolbarHeight","loadFail","key","text","reportError","hide","editSource","getModel","hasBeenModified","ui","confirm","confirmed","showSaveDialog","switchToSourceEditor","save","saveComplete","fragment","getSectionFragmentFromPage","sectionLine","onSaveComplete","saveFail","doc","saveData","wasRetry","jqXHR","status","response","onSaveFailure","tryTeardown","window","history","back"],"mappings":"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","file":"mobile.editor.ve.js","sourcesContent":["/* global ve */\nvar MobileFrontendArticleTarget = require( './ve.init.mw.MobileFrontendArticleTarget' ),\n\tschemaVisualEditorFeatureUse = require( './schemaVisualEditorFeatureUse' );\n\n// register\nve.init.mw.MobileFrontendArticleTarget = MobileFrontendArticleTarget;\nve.init.mw.targetFactory.register( MobileFrontendArticleTarget );\nschemaVisualEditorFeatureUse();\n// Hook up activity-tracking from VE's system to mobilefrontend's system\nve.trackSubscribe( 'activity.', function ( topic, data ) {\n\tmw.track( 'mf.schemaVisualEditorFeatureUse', ve.extendObject( data, {\n\t\tfeature: topic.split( '.' )[ 1 ],\n\t\t// eslint-disable-next-line camelcase\n\t\tediting_session_id: ve.init.target.overlay.sessionId\n\t} ) );\n} );\n","module.exports = function () {\n\tvar trackdebug = !!mw.util.getParamValue( 'trackdebug' );\n\n\tif ( mw.loader.getState( 'schema.VisualEditorFeatureUse' ) === null && !trackdebug ) {\n\t\treturn;\n\t}\n\n\t// VisualEditorFeatureUse is intended to log whenever EditAttemptStep\n\t// does, so this file references its config for sampling rates and\n\t// oversampling.\n\n\tmw.loader.using( [ 'ext.eventLogging.subscriber' ] ).then( function () {\n\t\tvar // Schema provided by ext.eventLogging.subscriber class\n\t\t\tSchema = mw.eventLog.Schema, // resource-modules-disable-line\n\t\t\tsampleRate = mw.config.get( 'wgWMESchemaEditAttemptStepSamplingRate' ),\n\t\t\t/**\n\t\t\t * Feature use schema\n\t\t\t * https://meta.wikimedia.org/wiki/Schema:VisualEditorFeatureUse\n\t\t\t */\n\t\t\tschemaVisualEditorFeatureUse = new Schema(\n\t\t\t\t'VisualEditorFeatureUse',\n\t\t\t\tsampleRate\n\t\t\t);\n\n\t\tfunction log() {\n\t\t\t// mw.log is a no-op unless resource loader is in debug mode, so\n\t\t\t// this allows trackdebug to work independently (T211698)\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log.apply( console, arguments );\n\t\t}\n\n\t\tmw.trackSubscribe( 'mf.schemaVisualEditorFeatureUse', function ( topic, data ) {\n\t\t\tvar event = {\n\t\t\t\tfeature: data.feature,\n\t\t\t\taction: data.action,\n\t\t\t\teditingSessionId: data.editing_session_id\n\t\t\t};\n\n\t\t\tif ( trackdebug ) {\n\t\t\t\tlog( topic, event );\n\t\t\t} else {\n\t\t\t\tschemaVisualEditorFeatureUse.log( event, (\n\t\t\t\t\tmw.config.get( 'wgWMESchemaEditAttemptStepOversample' ) ||\n\t\t\t\t\tmw.config.get( 'wgMFSchemaEditAttemptStepOversample' ) === 'visualeditor' ||\n\t\t\t\t\tmw.config.get( 'wgMFSchemaEditAttemptStepOversample' ) === 'all'\n\t\t\t\t) ? 1 : sampleRate );\n\t\t\t}\n\t\t} );\n\n\t} );\n};\n","/* global $ */\n\n/*!\n * VisualEditor MediaWiki Initialization MobileFrontendArticleTarget class.\n *\n * @copyright 2011-2015 VisualEditor Team and others; see AUTHORS.txt\n * @license The MIT License (MIT); see LICENSE.txt\n */\n\n/* global ve */\nvar MobileArticleTarget = ve.init.mw.MobileArticleTarget,\n\tparseSaveError = require( '../mobile.editor.overlay/parseSaveError' ),\n\tTarget = ve.init.mw.Target;\n\n/**\n * MediaWiki mobile frontend article target.\n *\n * @class\n * @extends MobileArticleTarget\n *\n * @param {VisualEditorOverlay} overlay Mobile frontend overlay\n * @param {Object} [config] Configuration options\n */\nfunction MobileFrontendArticleTarget( overlay, config ) {\n\tthis.overlay = overlay;\n\tthis.$overlay = overlay.$el;\n\tthis.$overlaySurface = overlay.$el.find( '.surface' );\n\tthis.useScrollContainer = ve.init.platform.constructor.static.isIos();\n\n\t// Parent constructor\n\tMobileFrontendArticleTarget.super.call( this, config );\n\n\t// Events\n\tthis.onWindowScrollDebounced = ve.debounce( this.onWindowScroll.bind( this ), 100 );\n\t$( this.getElementWindow() ).on( 'scroll', this.onWindowScrollDebounced );\n\n\t// Initialization\n\tthis.$element.addClass( 've-init-mw-mobileFrontendArticleTarget' );\n}\n\n/* Inheritance */\n\nOO.inheritClass( MobileFrontendArticleTarget, MobileArticleTarget );\n\n/* Static Properties */\n\nMobileFrontendArticleTarget.static.parseSaveError = parseSaveError;\n\n/* Methods */\n\n/**\n * Destroy the target\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.destroy = function () {\n\t// Parent method\n\tMobileFrontendArticleTarget.super.prototype.destroy.call( this );\n\n\t$( this.getElementWindow() ).off( 'scroll', this.onWindowScrollDebounced );\n\tthis.$overlay.css( 'padding-top', '' );\n};\n\n/*\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.getScrollContainer = function () {\n\tif ( this.useScrollContainer ) {\n\t\treturn this.overlay.$el.find( '.overlay-content' );\n\t}\n\t// Parent method\n\treturn MobileFrontendArticleTarget.super.prototype.getScrollContainer.call( this );\n};\n\n/*\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.isToolbarOverSurface = function () {\n\treturn true;\n};\n\n/**\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.onContainerScroll = function () {\n\t// MF provides the toolbar so there is no need to float the toolbar\n};\n\n/**\n * Handle window scroll events\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.onWindowScroll = function () {\n\tvar $window, windowTop, contentTop, surfaceView,\n\t\tsurface = this.surface,\n\t\ttarget = this;\n\n\tif ( !surface ) {\n\t\t// Editor has not loaded yet\n\t\treturn;\n\t}\n\n\t// iOS applies a scroll offset to the window when opening the keyboard to move the cursor into\n\t// view. On the editing surface, this is not necessary (we set large padding-bottom so that the\n\t// keyboard covers nothing); apply this offset to the surface instead. But in other cases allow\n\t// it to happen, otherwise the user can't scroll to see whatever is underneath the keyboard.\n\t// (T210559, T215604, T212967)\n\tsurfaceView = surface.getView();\n\tif ( this.useScrollContainer && surfaceView.isFocused() && !surfaceView.deactivated ) {\n\t\t$window = $( target.getElementWindow() );\n\t\twindowTop = $window.scrollTop();\n\t\tcontentTop = target.$scrollContainer.scrollTop();\n\n\t\t$window.scrollTop( 0 );\n\t\tsurface.scrollTo( contentTop + windowTop );\n\t\t// Make sure we didn't overshoot the cursor\n\t\tsurface.scrollCursorIntoView( target.getSurface() );\n\t}\n};\n\n/**\n * Handle surface scroll events\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.onSurfaceScroll = function () {\n\tvar nativeSelection, range;\n\n\tif ( ve.init.platform.constructor.static.isIos() ) {\n\t\t// iOS has another bug (!) where if you change the scroll offset of a\n\t\t// contentEditable with a cursor visible it disappears, so remove and\n\t\t// reapply the selection in that case.\n\t\tnativeSelection = this.getSurface().getView().nativeSelection;\n\t\tif ( nativeSelection.rangeCount && document.activeElement.contentEditable === 'true' ) {\n\t\t\trange = nativeSelection.getRangeAt( 0 );\n\t\t\tnativeSelection.removeAllRanges();\n\t\t\tnativeSelection.addRange( range );\n\t\t}\n\t}\n};\n\n/*\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.createSurface = function ( dmDoc, config ) {\n\tvar surface;\n\tif ( this.overlay.isNewPage ) {\n\t\tconfig = ve.extendObject( {\n\t\t\tplaceholder: mw.msg( 'mobile-frontend-editor-placeholder-new-page', mw.user )\n\t\t}, config );\n\t}\n\n\t// Parent method\n\tsurface = MobileFrontendArticleTarget\n\t\t.super.prototype.createSurface.call( this, dmDoc, config );\n\n\tsurface.connect( this, { scroll: 'onSurfaceScroll' } );\n\n\treturn surface;\n};\n\n/**\n * @inheritdoc\n */\nMobileFrontendArticleTarget.prototype.setSurface = function ( surface ) {\n\tvar changed = surface !== this.surface;\n\n\t// Parent method\n\tTarget.super.prototype.setSurface.apply( this, arguments );\n\n\tif ( changed ) {\n\t\tsurface.$element.addClass( 'content loading' );\n\t\tthis.$overlaySurface.append( surface.$element );\n\t}\n};\n\n/**\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.surfaceReady = function () {\n\tvar surface = this.getSurface();\n\n\t// Parent method\n\tMobileFrontendArticleTarget.super.prototype.surfaceReady.apply( this, arguments );\n\n\tthis.overlay.hideSpinner();\n\tsurface.$element.removeClass( 'loading' );\n\n\tsurface.getContext().connect( this, { resize: 'adjustContentPadding' } );\n\tthis.adjustContentPadding();\n\n\tthis.maybeShowWelcomeDialog();\n};\n\n/**\n * Match the content padding to the toolbar height\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.adjustContentPadding = function () {\n\tvar toolbarHeight = this.getToolbar().$element.outerHeight(),\n\t\tsurface = this.getSurface();\n\tsurface.setToolbarHeight( toolbarHeight );\n\tthis.$overlay.css( 'padding-top', toolbarHeight );\n\tthis.getSurface().scrollCursorIntoView();\n};\n\n/*\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.loadFail = function ( key, text ) {\n\t// Parent method\n\tMobileFrontendArticleTarget.super.prototype.loadFail.apply( this, arguments );\n\n\tthis.overlay.reportError( text );\n\tthis.overlay.hide();\n};\n\n/**\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.editSource = function () {\n\tvar target = this;\n\t// If changes have been made tell the user they have to save first\n\tif ( !this.getSurface().getModel().hasBeenModified() ) {\n\t\tthis.overlay.switchToSourceEditor();\n\t} else {\n\t\tOO.ui.confirm( mw.msg( 'mobile-frontend-editor-switch-confirm' ) ).then( function ( confirmed ) {\n\t\t\tif ( confirmed ) {\n\t\t\t\ttarget.showSaveDialog();\n\t\t\t}\n\t\t} );\n\t}\n};\n\n/**\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.save = function () {\n\t// Parent method\n\tMobileFrontendArticleTarget.super.prototype.save.apply( this, arguments );\n\n\tthis.overlay.log( {\n\t\taction: 'saveAttempt'\n\t} );\n};\n\n/**\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.showSaveDialog = function () {\n\t// Parent method\n\tMobileFrontendArticleTarget.super.prototype.showSaveDialog.apply( this, arguments );\n\n\tthis.overlay.log( {\n\t\taction: 'saveIntent'\n\t} );\n};\n\n/**\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.saveComplete = function () {\n\tvar fragment = this.getSectionFragmentFromPage();\n\t// Parent method\n\tMobileFrontendArticleTarget.super.prototype.saveComplete.apply( this, arguments );\n\n\tthis.overlay.sectionLine = '#' + fragment;\n\tthis.overlay.onSaveComplete();\n};\n\n/**\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n * @param {HTMLDocument} doc HTML document we tried to save\n * @param {Object} saveData Options that were used\n * @param {boolean} wasRetry Whether this was a retry after a 'badtoken' error\n * @param {Object} jqXHR\n * @param {string} status Text status message\n * @param {Object|null} response API response data\n */\n// eslint-disable-next-line max-len\nMobileFrontendArticleTarget.prototype.saveFail = function ( doc, saveData, wasRetry, jqXHR, status, response ) {\n\n\t// parent method\n\tMobileFrontendArticleTarget.super.prototype.saveFail.apply( this, arguments );\n\n\tthis.overlay.onSaveFailure( this.constructor.static.parseSaveError( response, status ) );\n};\n\n/**\n * FIXME: @inheritdoc once this file is in the right repo\n * @memberof MobileFrontendArticleTarget\n * @instance\n */\nMobileFrontendArticleTarget.prototype.tryTeardown = function () {\n\t// Parent method\n\tMobileFrontendArticleTarget.super.prototype.tryTeardown.apply( this, arguments )\n\t\t.then( function () {\n\t\t\t// eslint-disable-next-line no-restricted-properties\n\t\t\twindow.history.back();\n\t\t} );\n};\n\nmodule.exports = MobileFrontendArticleTarget;\n"],"sourceRoot":""}