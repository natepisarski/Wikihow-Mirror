(function() {
	"use strict";
	window.WH = window.WH || {};
	window.WH.WikihowCategoryContentAds = {
		ads: [
			/*{
				"image": "papercrafts.svg",
				"header": "Discover a new hobby with wikiHow’s course on paper crafts.",
				"text": "Take the full course to become a crafting expert.",
				"buttonText": "Sign up",
				"class": "c01_2"
			},*/
			/*{
				"image": "papercrafts.svg",
				"header": "Discover a new hobby with wikiHow’s course on wildlife origami for kids.",
				"text": "Take the full course to become a crafting expert.",
				"buttonText": "Sign up",
				"class": "c02_2"
			},*/
			/*{
				"image": "papercrafts.svg",
				"header": "Discover a new hobby with wikiHow’s course on daily crafts for kids.",
				"text": "Take the full course to become a crafting expert.",
				"buttonText": "Sign up",
				"class": "c03_2"
			},*/
			/*{
				"image": "knit.png",
				"header": "Discover a new hobby with wikiHow’s course on knitting for beginners.",
				"text": "Take the full course to become a crafting expert.",
				"buttonText": "Sign up",
				"class": "c04_2"
			},*/
			/*{
				"image": "drawing3.png",
				"header": "Discover a new hobby with wikiHow’s course on daily drawing for kids.",
				"text": "Take the full course to become a crafting expert.",
				"buttonText": "Sign up",
				"class": "c05_2"
			},*/
			/*{
				"image": "artbox.svg",
				"header": "Get the wikiHow Art Camp subscription box!",
				"text": "We’ll send you new activities every month, plus all the supplies you need.",
				"buttonText": "Sign up",
				"class": "sb01_2"
			},*/
			/*{
				"image": "craft.svg",
				"header": "Get the wikiHow Craft Camp subscription box!",
				"text": "We’ll send you new activities every month, plus all the supplies you need.",
				"buttonText": "Sign up",
				"class": "sb02_2"
			},*/
			{
				"image": "drawing2.png",
				"header": "Learn how to advance your drawing skills in a live online class.",
				"text": "Sign up to join our live online workshops taught by wikiHow instructors.",
				"buttonText": "Sign up",
				"class": "lc01_2"
			},
			{
				"image": "plane.png",
				"header": "Learn how to design a paper airplane in a live online class.",
				"text": "Sign up to join our live online workshops taught by wikiHow instructors.",
				"buttonText": "Sign up",
				"class": "lc02_2"
			},
			{
				"image": "stress.png",
				"header": "Learn how to help your child manage stress from a wikiHow expert.",
				"text": "Subscribe to our online course for in-depth expert advice and instructional content.",
				"buttonText": "Sign up",
				"class": "ec01_2"
			},
			{
				"image": "shape.png",
				"header": "Learn how to stay in shape while staying home from a wikiHow expert.",
				"text": "Subscribe to our online course for in-depth expert advice and instructional content.",
				"buttonText": "Sign up",
				"class": "ec02_2"
			},
			{
				"image": "bike.png",
				"header": "Learn how to maintain your bike from a wikiHow expert.",
				"text": "Subscribe to our online course for in-depth expert advice and instructional content.",
				"buttonText": "Sign up",
				"class": "ec03_2"
			},
			{
				"image": "therapist.png",
				"header": "Learn how to be your own therapist from a wikiHow expert.",
				"text": "Subscribe to our online course for in-depth expert advice and instructional content.",
				"buttonText": "Sign up",
				"class": "ec04_2"
			},
			{
				"image": "interview.png",
				"header": "Learn how to interview for a job remotely from a wikiHow expert.",
				"text": "Subscribe to our online course for in-depth expert advice and instructional content.",
				"buttonText": "Sign up",
				"class": "ec05_2"
			},
			{
				"image": "family.png",
				"header": "Learn how to get along better with your family from a wikiHow expert.",
				"text": "Subscribe to our online course for in-depth expert advice and instructional content.",
				"buttonText": "Sign up",
				"class": "ec06_2"
			},
			{
				"image": "husband.png",
				"header": "Learn how to get your husband to help more from a wikiHow expert.",
				"text": "Subscribe to our online course for in-depth expert advice and instructional content.",
				"buttonText": "Sign up",
				"class": "ec07_2"
			},
			/*{
				"image": "science.svg",
				"header": "Get the wikiHow Science Camp subscription box!",
				"text": "We’ll send you new activities every month, plus all the supplies you need.",
				"buttonText": "Sign up",
				"class": "sb03_2"
			},*/
			/*{
				"image": "adulting.png",
				"header": "Get the wikiHow Adulting 101 subscription box!",
				"text": "We’ll send you new activities every month, plus all the supplies you need.",
				"buttonText": "Sign up",
				"class": "sb04_2"
			},*/
			{
				"image": "coverletter.png",
				"header": "Learn how to write a cover letter in a live online class.",
				"text": "Sign up to join our live online workshops taught by wikiHow instructors.",
				"buttonText": "Sign up",
				"class": "lc03_2"
			},
			/*{
				"image": "productive2.png",
				"header": "Learn how to stay productive while working from home in a live online class.",
				"text": "Sign up to join our live online workshops taught by wikiHow instructors.",
				"buttonText": "Sign up",
				"class": "lc04_2"
			},*/
			/*{
				"image": "ebook.png",
				"header": "Learn how to publish an ebook on Amazon in a live online class.",
				"text": "Sign up to join our live online workshops taught by wikiHow instructors.",
				"buttonText": "Sign up",
				"class": "lc05_2"
			},*/
			/*{
				"image": "family.png",
				"header": "Learn how to be patient with your kids in a live online class.",
				"text": "Sign up to join our live online workshops taught by wikiHow instructors.",
				"buttonText": "Sign up",
				"class": "lc06_2"
			},*/
			/*{
				"image": "book2.png",
				"header": "Join the wikiHow Book Club!",
				"text": "Sign up to join our live online workshops taught by wikiHow instructors.",
				"buttonText": "Sign up",
				"class": "bc01_2"
			},*/
			/*{
				"image": "dog.png",
				"header": "Get the wikiHow eBook on how to take care of a dog.",
				"text": "A complete guide for dog-owners, all in one place.",
				"buttonText": "Sign up",
				"class": "eb01_2"
			},*/
			/*{
				"image": "cat.png",
				"header": "Get the wikiHow eBook on how to take care of a cat.",
				"text": "A complete guide for cat-owners, all in one place.",
				"buttonText": "Sign up",
				"class": "eb02_2"
			},*/
			/*{
				"image": "family.png",
				"header": "Get the wikiHow eBook on how to get along with your family.",
				"text": "Become an expert, with detailed instructions and step-by-step guides.",
				"buttonText": "Sign up",
				"class": "eb03_2"
			},*/
			/*{
				"image": "adulting.png",
				"header": "Get the wikiHow eBook on how to become a real adult.",
				"text": "Become an expert, with detailed instructions and step-by-step guides.",
				"buttonText": "Sign up",
				"class": "eb04_2"
			},*/
			/*{
				"image": "fix.png",
				"header": "Get the wikiHow eBook on how to fix stuff around the house.",
				"text": "Become an expert, with detailed instructions and step-by-step guides.",
				"buttonText": "Sign up",
				"class": "eb05_2"
			},*/
			/*{
				"image": "husband.png",
				"header": "Get the wikiHow eBook on how to get your husband to help more.",
				"text": "Become an expert, with detailed instructions and step-by-step guides.",
				"buttonText": "Sign up",
				"class": "eb06_2"
			},*/


		],

		init: function() {
			if($("#cat_wca_container").length > 0) {
				var urlParams = new URLSearchParams(window.location.search);
				if(urlParams.has("id")) {
					var random = urlParams.get("id");
				} else {
					var random = Math.floor(Math.random() * WH.WikihowCategoryContentAds.ads.length);
				}

				var $container = $("#cat_wca_container");
				var selectedAd = WH.WikihowCategoryContentAds.ads[random];
				$container.addClass(selectedAd["class"]);
				$("img", $container).attr("src", "/extensions/wikihow/WikihowContentAds/images/" + selectedAd["image"]);
				$("h4", $container).html(selectedAd["header"]);
				$("p", $container).html(selectedAd["text"]);
				$("a", $container).html(selectedAd["buttonText"]);
				$("#cat_wca").show();

				$("a", $container).on("click", function(e){
					e.preventDefault();
					if(WH.event) {
						//send the event
						if(mw.config.get("wgUserId") == null) {
							var user_state = "logged out";
						} else {
							var user_state = "logged in"
						}
						WH.event('cat_promo_concepttest_02_click_open_em', {'type': $(this).parents("#cat_wca_container").attr("class"), 'user_state': user_state});
					}

					//show the lightbox
					$("#wca_lightbox").show();
					$("#wca_close").on("click", function(e) {
						e.preventDefault();
						$("#wca_lightbox").hide();
					});
					$("#wca_lightbox #wca_email").on("click", function(e){
						e.preventDefault();
						if($("#wca_lightbox input").val() != "") {
							//send to back end
							$.ajax({
								url: '/Special:WikihowContentAds',
								type: 'POST',
								dataType: 'json',
								data:
									{
										'action': 'save-email',
										'campaign': $("#cat_wca_container").attr("class"),
										'email': $("#wca_lightbox input").val(),
										'test': 'category'
									}
							});
							$("#wca_lightbox h2").html("Thanks!");
							$("#wca_lightbox p:first").html("Thanks for your interest! We'll reach out to you with more information about our new educational activities and experiences.");
							$("#wca_lightbox p:last").html("");
							$("#wca_lightbox #wca_email, #wca_lightbox input").hide();
						} else {
							$("#wca_lightbox input").addClass("error");
						}
					});

				});

			}
		}
	};

	$(document).ready(function() {
		WH.WikihowCategoryContentAds.init();
	});
})();
